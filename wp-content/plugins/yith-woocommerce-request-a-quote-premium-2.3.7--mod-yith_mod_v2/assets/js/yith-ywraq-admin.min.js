jQuery(document).ready(function(s){"use strict";var e=s(document).find(".yith-ywraq-chosen");s("#_ywraq_safe_submit_field").val(""),e.each(function(){s.fn.chosen!==undefined&&s(this).chosen({width:"350px",disable_search:!0,multiple:!0})});var t=s("select.yit-contact-form").parent().parent(),a=s("select.contact-form-7").parent().parent(),i=s("select.gravity-forms").parent().parent();function n(){var e=s("#_ywraq_pay_quote_now").val(),t=s("#_ywraq_checkout_info").closest(".the-metabox"),a=s("#_ywraq_lock_editing").closest(".the-metabox"),i=s("#_ywraq_disable_shipping_method").closest(".the-metabox"),n=s("#_ywraq_deposit_rate").closest(".the-metabox"),o=s("#_ywraq_deposit_enable").closest(".the-metabox");0==e||"no"==e?(t.show(),a.show(),i.show(),o.show(),n.show()):(t.hide(),a.hide(),i.hide(),o.hide(),n.hide())}function o(){var e=s("#_ywraq_deposit_enable").val(),t=s("#_ywraq_pay_quote_now").val(),a=s("#_ywraq_deposit_rate").closest(".the-metabox");0!=t&&"no"!=t||(0==e||"no"==e?a.hide():a.show())}s("select#ywraq_inquiry_form_type").change(function(){switch(s("option:selected",this).val()){case"yit-contact-form":t.show(),a.hide(),i.hide();break;case"contact-form-7":t.hide(),i.hide(),a.show();break;case"gravity-forms":t.hide(),a.hide(),i.show();break;default:t.hide(),a.hide(),i.hide()}}).change(),s("#ywraq_submit_button").on("click",function(e){e.preventDefault(),s("#_ywraq_safe_submit_field").val("send_quote"),s(this).closest("form").submit()}),s("#ywraq_pdf_button").on("click",function(e){e.preventDefault(),s("#_ywraq_safe_submit_field").val("create_preview_pdf"),s(this).closest("form").submit()}),0<s("#_ywcm_request_expire").length&&s("#_ywcm_request_expire").each(function(){s.datepicker.setDefaults({gotoCurrent:!0,dateFormat:"yy-mm-dd"}),s(this).datepicker("option","minDate","1d")}),s(document).on("change",s("#_ywraq_pay_quote_now"),function(){n()}),n(),s(document).on("change",s("#_ywraq_deposit_enable"),function(){o()}),o(),s("#ywraq_pdf_file").attr("disabled","disabled");var d=s("#add-new"),r=s("#add-new-name"),c=s("#ywraq_field_add_edit_form"),l=s("#ywraq_form_fields"),_=function(a,e,t,i,n){var o;a.attr("data-row",i),a.attr("data-action",t),n||(o=a.find("tr.remove_default")).length&&o.remove(),a.find('select[name="field_type"]').on("change",function(){var e=a.find("tr[data-hide]"),t=s(this).val();e.length&&s.each(e,function(){var e=s(this).data("hide").split(",");-1<s.inArray(t,e)?s(this).hide():s(this).show()})}).trigger("change"),a.dialog({title:e,modal:!0,width:500,resizable:!1,autoOpen:!1,buttons:[{text:ywraq_admin.default_form_submit_label,click:function(){s.edit_add_field(this)&&s(this).dialog("close")}}],close:function(e,t){a.dialog("destroy"),a.remove()}})},f=function(e){return e=(e=(e=e.trim()).replace(/\s/g,"_")).replace(/[^A-Za-z0-9_]+/gi,"")};r.on("focus",function(){s(this).removeClass("required field-exists")}),d.on("click",function(){var e=r.val();if(""==e)return r.addClass("required"),!1;if(e=f(e),l.find('input.field_name[value="'+e+'"]').length)return r.addClass("field-exists"),!1;var t=c.clone();_(t,ywraq_admin.popup_add_title,"add","",!0),t.find('input[name="field_name"]').val(e),t.dialog("open")}),s(document).on("click","button.edit_field",function(){var e=s(this).closest("tr"),t=e.data("row"),a=e.find('input[type="hidden"]'),n=c.clone();s.each(a,function(e,t){var a=s(t).data("name"),i=n.find('td *[name="'+a+'"]');"checkbox"==i.attr("type")?0==s(t).val()?i.removeAttr("checked"):i.attr("checked","checked"):i.val(s(t).val())}),_(n,ywraq_admin.popup_edit_title,"edit",t,e.hasClass("is_custom")),n.dialog("open")}),s.edit_add_field=function(d){var r,e,t=l.find("tbody tr"),a=s(d).data("action");return"edit"==a?(e=s(d).data("row"),r=t.filter('[data-row="'+e+'"]')):(r=t.filter(":not(.disabled-row)").last().clone(),e=t.size(),r.attr("data-row",e),r.addClass("is_custom")),s.each(r.find('input[type="hidden"]'),function(e,t){var a=s(t).data("name"),i=s(d).find('td *[name="'+a+'"]'),n="",o="";i.length&&(o="checkbox"==i.attr("type")?1==(n=i.is(":checked")?1:0)?ywraq_admin.enabled:"-":(n=i.val(),"field_name"==a&&(n=f(n)),n),s(t).val(n),r.find(".td_"+a).html(o))}),"add"==a&&(t.last().after(r),"undefined"!=typeof s.fn.tipTip&&r.find(".tips").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200})),!0},s(".check-column input").on("change",function(){s(this);var e=s("td.td_select input");s(this).is(":checked")?e.attr("checked","checked"):e.removeAttr("checked")}),s(document).on("click","button.enable_field",function(){var e,t=s(this),a=t.closest("tr"),i=a.find('input[data-name="field_enabled"]');a.toggleClass("disabled-row"),i.length&&i.val(a.hasClass("disabled-row")?"0":"1"),e=t.html(),t.html(t.data("label")),t.data("label",e)});s(document).on("click","button.remove_field",function(){var e=s(this).closest("tr");e.hasClass("is_custom")&&e.fadeOut(400,function(){e.addClass("disabled-row").hide(),e.find('input[data-name="field_deleted"]').val("yes")})}),s(document).on("click",".save-form",function(e){e.preventDefault();var t=s("#ywraq_form_fields_form");if(t.is(".processing"))return!1;t.addClass("processing"),1!==t.data()["blockUI.isBlocked"]&&t.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),s.ajax({type:"POST",url:ywraq_admin.ajax_url+"?action=ywraq_save_default_form",data:s("#ywraq_form_fields_form :input").serialize(),success:function(){location.reload()},dataType:"html"})});var h=s(document).find(".ywraq_cf7_link"),u=s(document).find(".ywraq_gf_link");h.each(function(){var t=s(this),e=t.closest(".forminp-select").find("select"),a=t.attr("href"),i=e.val();0!=i&&t.attr("href",a+"&post="+i+"&action=edit"),e.on("change",function(){var e=s(this).val();t.attr("href",a+"&post="+e+"&action=edit")})}),u.each(function(){var t=s(this),e=t.closest(".forminp-select").find("select"),a=t.attr("href"),i=e.val();0!=i&&t.attr("href",a+"&id="+i),e.on("change",function(){var e=s(this).val();t.attr("href",a+"&id="+e)})});var m=s("#ywraq_message_to_view_details").closest("tr"),p=s("#ywraq_thank_you_page").closest("tr");s(document).on("change",'input[name="ywraq_how_show_after_sent_the_request"]:checked',function(e){var t=s(this).val();"simple_message"!==t?m.hide():s("#ywraq_enable_link_details").trigger("change"),"thank_you_page"!==t?p.hide():p.show()}),s(document).find('input[name="ywraq_how_show_after_sent_the_request"]').trigger("change"),"simple_message"!==s(document).find('input[name="ywraq_how_show_after_sent_the_request"]:checked').val()&&m.hide()});